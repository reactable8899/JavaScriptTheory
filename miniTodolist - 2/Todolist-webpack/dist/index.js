!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TodoList=e():t.TodoList=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=function(){};o.prototype.make=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=document.createElement(t),a=0;a<e.length;a++){var i=e[a];o.classList.add(i)}for(var s in n)o[s]=n[s];return o},o.prototype.find=function(t,e){return t.querySelector(e)},o.prototype.findAll=function(t,e){return t.querySelectorAll(e)},o.prototype.appendTo=function(t,e){t.append(e)};var a=new o,i=function(){};i.prototype.setToStorage=function(t){if(null!=t){for(var e=[],n=0;n<t.list.length;n++){var o={text:t.list[n].name,priority:t.list[n].priority};e.push(o)}localStorage.setItem(t.name,JSON.stringify(e))}},i.prototype.getFromStorage=function(t,e){var n=JSON.parse(localStorage.getItem(t.name)),o=[],a={name:t.name,list:o};if(null!=n)for(var i=0;i<n.length;i++){var s=e.currentManager.addTask(n[i].text,n[i].priority,e);o.push(s)}e.fillByManagerList(a)},i.prototype.SetStorageButtons=function(t){var e=[],n=JSON.parse(localStorage.getItem("buttonsList"));if(null!=n)for(var o=0;o<n.length;o++)e.push(n[o]);e.push(t),localStorage.setItem("buttonsList",JSON.stringify(e))},i.prototype.getStorageButtons=function(t){var e=JSON.parse(localStorage.getItem("buttonsList"));if(null!=e)for(var n=0;n<e.length;n++){var o=a.make("button",["manager","list"],{textContent:e[n]});o.dataset.id=e[n],a.appendTo(t.lists,o),a.appendTo(t.lists,t.addListButton);var i=new l(e[n]);t.managers.push(i),t.bindButtonEvent(o)}};var s=new i,r=function t(e,n,o){this.name=e,this.priority=n,this.app=o,this.dom={div:null};var i=0,r=a.make("div",["list__task"]),d=a.make("span");d.classList.add=t.prototype.getPriority(n,d);var u=a.make("span",["listText"],{textContent:e}),l=a.make("img",["delButton"],{src:"./images/delButton.png"}),c=a.make("button",["deleteSpan"],{textContent:"Удалить"}),p=a.make("img",["editButton"],{src:"./images/editPic.png"});l.addEventListener("click",(function(t){0===i?(r.appendChild(c),c.classList.add("changeDisplayBlock"),c.classList.remove("changeDisplayNone"),i++):(c.classList.add("changeDisplayNone"),c.classList.remove("changeDisplayBlock"),i--)})),c.addEventListener("click",(function(){var t=event.target.parentNode;o.tasksCountDec(event.target.parentNode),s.setToStorage(this.currentManager),t.remove()})),p.addEventListener("click",(function(t){for(var e=0,n=document.querySelectorAll(".list__task"),a=0;a<n.length;a++){n[a].querySelector(".listText").textContent==u.textContent&&(e=a)}if(0==i){u.textContent;u.contentEditable="true",u.focus(),i++}else{u.contentEditable="false",i--;var s=JSON.parse(localStorage.getItem(o.currentManager.name));s[e].text=u.textContent,localStorage.setItem(o.currentManager.name,JSON.stringify(s))}})),r.appendChild(d),r.appendChild(u),r.appendChild(l),r.appendChild(p),this.dom.div=r};r.prototype.getElement=function(){return this.dom.div},r.prototype.getPriority=function(t,e){"High"===t?(e.textContent=t,e.classList.add("priorityClassHigth")):"Medium"===t?(e.textContent=t,e.classList.add("priorityClassMedium")):(e.textContent=t,e.classList.add("priorityClassLow"))};var d=r,u=function(t){this.name=t,this.list=[]};u.prototype.addTask=function(t,e,n){var o=new d(t,e,n);return this.list.push(o),o};var l=u;n(0);var c=function(){this.managers=[],this.currentManager=null,this.list={counter:0},this.prepare(),this.addNewList(),this.drawButton(),this.setFirstList(),this.getFromStorage(this.managers[0]),this.getStorageButtons()};c.prototype.prepare=function(){var t=a.find(document,".main__block");a.find(document,".main__block_show");this.lists=a.make("div",["lists"]),this.lists.span=a.make("span"),this.lists.TodayButton=a.make("button",["manager","list"],{textContent:"Cегодня"}),this.lists.TodayButton.dataset.id="today",this.addListButton=a.make("button",["listAdd"],{textContent:"+"}),this.addTasksButton=a.make("button",["button"],{textContent:"Add Task"}),this.addListButton.dataset.toggle="modal",this.addListButton.dataset.target="#myModal",this.addBlockInput=a.make("input",["input"]),this.addBlockInput.placeholder="Add Task...",this.addBlockSelect=a.make("select",["priority"]),this.addBlockOptionHigth=a.make("option",[],{textContent:"High"}),this.addBlockOptionMedium=a.make("option",[],{textContent:"Medium"}),this.addBlockOptionLow=a.make("option",[],{textContent:"Low"}),this.taskList=a.make("div",["taskList"]),this.taskList.ul=a.make("ul",["ulClass"]),this.taskList.Counter=a.make("span",["taskCount"],{textContent:"Tasks: ".concat(this.list.counter)}),a.appendTo(this.addBlockSelect,this.addBlockOptionHigth),a.appendTo(this.addBlockSelect,this.addBlockOptionMedium),a.appendTo(this.addBlockSelect,this.addBlockOptionLow),a.appendTo(this.taskList,this.addBlockInput),a.appendTo(this.taskList,this.addBlockSelect),a.appendTo(this.taskList,this.addTasksButton),a.appendTo(this.taskList,this.taskList.ul),a.appendTo(this.lists,this.lists.TodayButton),a.appendTo(this.lists,this.addListButton),a.appendTo(t,this.lists),a.appendTo(t,this.taskList),a.appendTo(t,this.taskList.Counter);var e=JSON.parse(localStorage.getItem("counter"));null!=e&&(this.taskList.Counter.style.display="block",this.taskList.Counter.textContent="Tasks: ".concat(e))},c.prototype.addNewList=function(){var t=this;a.find(document,".listAdd").addEventListener("click",(function(){var e=a.find(document,".newListInput");a.make("button",["listAdd"],{textContent:"+"});function n(){var n=e.value;if(""!==n){var o=a.make("button",["manager","list"],{textContent:n});o.dataset.id=n,a.appendTo(t.lists,o),a.appendTo(t.lists,t.addListButton);var i=new l(n);t.managers.push(i),t.bindButtonEvent(o),e.value="",t.SetStorageButtons(n)}}document.querySelector(".newListInput").addEventListener("keydown",(function(t){13===t.keyCode&&(n(),e.value="")})),a.find(document,"#addList").addEventListener("click",n)}))},c.prototype.drawButton=function(){var t=a.find(document,".button");this.taskList.ul=a.find(document,".ulClass");for(var e=this,n=a.findAll(document,".manager"),o=0;o<n.length;o++){var i=n[o],r=new l(i.dataset.id);this.managers.push(r),this.bindButtonEvent(i)}function d(){var t=a.find(document,".priority").value;if(e.tasksCountInc(),e.taskList.Counter.style.display="block",e.inputValue=a.find(document,".input"),""!=e.inputValue.value){var n=e.inputValue.value,o=e.currentManager.addTask(n,t,e);e.AddToUl(o.getElement()),e.inputValue.value="",e.inputValue.focus(),s.setToStorage(e.currentManager)}}document.querySelector(".input").addEventListener("keydown",(function(t){13===t.keyCode&&d()})),t.addEventListener("click",d)},c.prototype.tasksCountInc=function(){var t=JSON.parse(localStorage.getItem("counter"));t++,localStorage.setItem("counter",JSON.stringify(t)),this.taskList.Counter.textContent="Tasks: ".concat(t)},c.prototype.tasksCountDec=function(t){for(var e=a.find(t,".listText").textContent,n=0;n<this.currentManager.list.length;n++)this.currentManager.list[n].name===e&&(this.currentManager.list.splice(n,1),s.setToStorage(this.currentManager));var o=JSON.parse(localStorage.getItem("counter"));o>0&&o--,localStorage.setItem("counter",JSON.stringify(o)),this.taskList.Counter.textContent="Tasks: ".concat(o)},c.prototype.setFirstList=function(){this.currentManager=this.managers[0]},c.prototype.bindButtonEvent=function(t){var e=this;t.addEventListener("click",(function(t){var n=t.target.dataset.id;e.taskList.ul.innerHTML="";for(var o=0;o<e.managers.length;o++)e.managers[o].name===n&&(e.currentList=n,e.currentManager=e.managers[o]);e.getFromStorage(e.currentManager)}))},c.prototype.setToStorage=function(t){s.setToStorage(t)},c.prototype.getFromStorage=function(t){s.getFromStorage(t,this)},c.prototype.SetStorageButtons=function(t){s.SetStorageButtons(t)},c.prototype.getStorageButtons=function(){s.getStorageButtons(this)},c.prototype.fillByManagerList=function(t){for(var e=0;e<t.list.length;e++)this.AddToUl(t.list[e].getElement())},c.prototype.AddToUl=function(t){a.appendTo(this.taskList.ul,t)};e.default=c}]).default}));