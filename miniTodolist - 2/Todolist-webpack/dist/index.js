!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TodoList=e():t.TodoList=e()}(window,(function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.r(e);var i=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"make",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=document.createElement(t),i=0;i<e.length;i++){var o=e[i];a.classList.add(o)}for(var s in n)a[s]=n[s];return a}},{key:"find",value:function(t,e){return t.querySelector(e)}},{key:"findAll",value:function(t,e){return t.querySelectorAll(e)}},{key:"appendTo",value:function(t,e){t.append(e)}}])&&a(e.prototype,n),i&&a(e,i),t}());function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var s=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"setToStorage",value:function(t){if(null!=t){for(var e=[],n=0;n<t.list.length;n++){var a={text:t.list[n].name,priority:t.list[n].priority};e.push(a)}localStorage.setItem(t.name,JSON.stringify(e))}}},{key:"getFromStorage",value:function(t,e){var n=JSON.parse(localStorage.getItem(t.name)),a=[],i={name:t.name,list:a};if(null!=n)for(var o=0;o<n.length;o++){var s=e.currentManager.addTask(n[o].text,n[o].priority,e);a.push(s)}e.fillByManagerList(i)}},{key:"SetStorageButtons",value:function(t){var e=[],n=JSON.parse(localStorage.getItem("buttonsList"));if(null!=n)for(var a=0;a<n.length;a++)e.push(n[a]);e.push(t),localStorage.setItem("buttonsList",JSON.stringify(e))}},{key:"getStorageButtons",value:function(t){var e=JSON.parse(localStorage.getItem("buttonsList"));if(null!=e)for(var n=0;n<e.length;n++){var a=i.make("button",["manager","list"],{textContent:e[n]});a.dataset.id=e[n],i.appendTo(t.lists,a),i.appendTo(t.lists,t.addListButton);var o=new c(e[n]);t.managers.push(o),t.bindButtonEvent(a)}}}])&&o(e.prototype,n),a&&o(e,a),t}());function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.priority=n,this.app=a,this.dom={div:null};var o=0,r=0,l=this,u=i.make("div",["list__task"]),c=i.make("span");c.classList.add=t.prototype.getPriority(n,c);var d=i.make("span",["listText"],{textContent:e}),p=i.make("img",["delButton"],{src:"./images/delButton.png"}),f=i.make("button",["deleteSpan"],{textContent:"Удалить"}),h=i.make("img",["editButton"],{src:"./images/editPic.png"}),g=i.make("img",["statusActive"],{src:"./images/done1.png"});p.addEventListener("click",(function(t){0===o?(u.appendChild(f),f.classList.add("changeDisplayBlock"),f.classList.remove("changeDisplayNone"),o++):(f.classList.add("changeDisplayNone"),f.classList.remove("changeDisplayBlock"),o--)})),f.addEventListener("click",(function(){event.target.parentNode.remove(),a.tasksCountDec(event.target.parentNode),s.setToStorage(l.app.currentManager)})),g.addEventListener("click",(function(){0===r?(g.src="./images/done.png",g.classList.add("statusDone"),g.classList.remove("statusActive"),h.style.display="none",d.style.cssText="text-decoration: line-through; color: #7E8591",r++):(g.src="./images/done1.png",g.classList.add("statusActive"),g.classList.remove("statusDone"),h.style.display="block",d.style.color="black",d.style.cssText="text-decoration: none",r--)})),h.addEventListener("click",(function(t){for(var e=0,n=document.querySelectorAll(".list__task"),i=0;i<n.length;i++){n[i].querySelector(".listText").textContent==d.textContent&&(e=i)}if(0==o){d.textContent;d.contentEditable="true",d.focus(),o++}else{d.contentEditable="false",o--;var s=JSON.parse(localStorage.getItem(a.currentManager.name));s[e].text=d.textContent,localStorage.setItem(a.currentManager.name,JSON.stringify(s))}})),u.appendChild(c),u.appendChild(d),u.appendChild(g),u.appendChild(p),u.appendChild(h),this.dom.div=u}var e,n,a;return e=t,(n=[{key:"getElement",value:function(){return this.dom.div}},{key:"getPriority",value:function(t,e){"High"===t?(e.textContent=t,e.classList.add("priorityClassHigth")):"Medium"===t?(e.textContent=t,e.classList.add("priorityClassMedium")):(e.textContent=t,e.classList.add("priorityClassLow"))}}])&&r(e.prototype,n),a&&r(e,a),t}();function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.list=[]}var e,n,a;return e=t,(n=[{key:"addTask",value:function(t,e,n){var a=new l(t,e,n);return this.list.push(a),a}}])&&u(e.prototype,n),a&&u(e,a),t}();function d(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n(0);var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.managers=[],this.currentManager=null,this.list={counter:0},this.prepare(),this.addNewList(),this.drawButton(),this.setFirstList(),this.getFromStorage(this.managers[0]),this.getStorageButtons()}var e,n,a;return e=t,(n=[{key:"prepare",value:function(){var t=i.find(document,".main__block");i.find(document,".main__block_show"),this.lists=i.make("div",["lists"]),this.lists.span=i.make("span"),this.lists.TodayButton=i.make("button",["manager","list"],{textContent:"Cегодня"}),this.lists.TodayButton.dataset.id="today",this.addListButton=i.make("button",["listAdd"],{textContent:"+"}),this.addTasksButton=i.make("button",["button"],{textContent:"Add Task"}),this.addListButton.dataset.toggle="modal",this.addListButton.dataset.target="#myModal",this.addBlockInput=i.make("input",["input"]),this.addBlockInput.placeholder="Add Task...",this.addBlockSelect=i.make("select",["priority"]),this.addBlockOptionHigth=i.make("option",[],{textContent:"High"}),this.addBlockOptionMedium=i.make("option",[],{textContent:"Medium"}),this.addBlockOptionLow=i.make("option",[],{textContent:"Low"}),this.taskList=i.make("div",["taskList"]),this.taskList.ul=i.make("ul",["ulClass"]),this.taskList.Counter=i.make("span",["taskCount"],{textContent:"Tasks: ".concat(this.list.counter)}),i.appendTo(this.addBlockSelect,this.addBlockOptionHigth),i.appendTo(this.addBlockSelect,this.addBlockOptionMedium),i.appendTo(this.addBlockSelect,this.addBlockOptionLow),i.appendTo(this.taskList,this.addBlockInput),i.appendTo(this.taskList,this.addBlockSelect),i.appendTo(this.taskList,this.addTasksButton),i.appendTo(this.taskList,this.taskList.ul),i.appendTo(this.lists,this.lists.TodayButton),i.appendTo(this.lists,this.addListButton),i.appendTo(t,this.lists),i.appendTo(t,this.taskList),i.appendTo(t,this.taskList.Counter);var e=JSON.parse(localStorage.getItem("counter"));null!=e&&(this.taskList.Counter.style.display="block",this.taskList.Counter.textContent="Tasks: ".concat(e))}},{key:"addNewList",value:function(){var t=this;i.find(document,".listAdd").addEventListener("click",(function(){var e=i.find(document,".newListInput");i.make("button",["listAdd"],{textContent:"+"}),document.querySelector(".newListInput").addEventListener("keydown",(function(n){13===n.keyCode&&(t.createNewList(),e.value="")})),i.find(document,"#addList").addEventListener("click",t.createNewList.bind(t))}))}},{key:"createNewList",value:function(){var t=i.find(document,".newListInput"),e=t.value;if(""!==e){var n=i.make("button",["manager","list"],{textContent:e});n.dataset.id=e,i.appendTo(this.lists,n),i.appendTo(this.lists,this.addListButton);var a=new c(e);this.managers.push(a),this.bindButtonEvent(n),t.value="",this.SetStorageButtons(e)}}},{key:"drawButton",value:function(){var t=i.find(document,".button");this.taskList.ul=i.find(document,".ulClass");for(var e=this,n=i.findAll(document,".manager"),a=0;a<n.length;a++){var o=n[a],s=new c(o.dataset.id);this.managers.push(s),this.bindButtonEvent(o)}document.querySelector(".input").addEventListener("keydown",(function(t){13===t.keyCode&&e.createNewtask()})),t.addEventListener("click",this.createNewtask.bind(e))}},{key:"createNewtask",value:function(){var t=i.find(document,".priority").value;if(this.tasksCountInc(),this.taskList.Counter.style.display="block",this.inputValue=i.find(document,".input"),""!=this.inputValue.value){var e=this.inputValue.value,n=this.currentManager.addTask(e,t,this);this.AddToUl(n.getElement()),this.inputValue.value="",this.inputValue.focus(),s.setToStorage(this.currentManager)}}},{key:"tasksCountInc",value:function(){var t=JSON.parse(localStorage.getItem("counter"));t++,localStorage.setItem("counter",JSON.stringify(t)),this.taskList.Counter.textContent="Tasks: ".concat(t)}},{key:"tasksCountDec",value:function(t){for(var e=i.find(t,".listText").textContent,n=0;n<this.currentManager.list.length;n++)this.currentManager.list[n].name===e&&(this.currentManager.list.splice(n,1),s.setToStorage(this.currentManager));var a=JSON.parse(localStorage.getItem("counter"));a>0&&a--,localStorage.setItem("counter",JSON.stringify(a)),this.taskList.Counter.textContent="Tasks: ".concat(a)}},{key:"setFirstList",value:function(){this.currentManager=this.managers[0]}},{key:"bindButtonEvent",value:function(t){var e=this;t.addEventListener("click",(function(t){var n=t.target.dataset.id;e.taskList.ul.innerHTML="";for(var a=0;a<e.managers.length;a++)e.managers[a].name===n&&(e.currentList=n,e.currentManager=e.managers[a]);e.getFromStorage(e.currentManager)}))}},{key:"setToStorage",value:function(t){s.setToStorage(t)}},{key:"getFromStorage",value:function(t){s.getFromStorage(t,this)}},{key:"SetStorageButtons",value:function(t){s.SetStorageButtons(t)}},{key:"getStorageButtons",value:function(){s.getStorageButtons(this)}},{key:"fillByManagerList",value:function(t){for(var e=0;e<t.list.length;e++)this.AddToUl(t.list[e].getElement())}},{key:"AddToUl",value:function(t){i.appendTo(this.taskList.ul,t)}}])&&d(e.prototype,n),a&&d(e,a),t}();e.default=p}]).default}));