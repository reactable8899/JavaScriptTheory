!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TodoList=e():t.TodoList=e()}(window,(function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=function(){};a.prototype.make=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=document.createElement(t),o=0;o<e.length;o++){var i=e[o];a.classList.add(i)}for(var s in n)a[s]=n[s];return a},a.prototype.find=function(t,e){return t.querySelector(e)},a.prototype.findAll=function(t,e){return t.querySelectorAll(e)},a.prototype.appendTo=function(t,e){t.append(e)};var o=new a,i=function t(e,n,a){this.name=e,this.priority=n,this.app=a,this.dom={div:null};var i=0,s=0,r=o.make("div",["list__task"]),d=o.make("span");d.classList.add=t.prototype.getPriority(n,d);var l=o.make("span",["listText"],{textContent:e}),u=o.make("button",["list__button"],{textContent:"..."}),p=o.make("button",["deleteSpan"],{textContent:"Удалить"}),c=o.make("button",["editButton"],{textContent:"edit"}),h=o.make("button",["editOk"],{textContent:"+"});u.addEventListener("click",(function(t){0===i?(r.appendChild(p),p.classList.add("changeDisplayBlock"),p.classList.remove("changeDisplayNone"),i++):(p.classList.add("changeDisplayNone"),p.classList.remove("changeDisplayBlock"),i--)})),c.addEventListener("click",(function(t){var e=t.target.parentNode,n=e.querySelector(".listText");if(0==s){s++;var a=o.make("input",["editInput"],{value:n.textContent});r.appendChild(a),r.appendChild(h),n.style.display="none"}else{var i=e.querySelector(".editInput");n.style.display="inline-block",i.remove(),h.remove(),s--}h.addEventListener("click",(function(){var t=e.querySelector(".editInput"),a=o.make("span",["listText"],{textContent:t.value});s--,r.appendChild(a),n.remove(),t.remove(),h.remove()}))})),p.addEventListener("click",(function(){var t=event.target.parentNode;a.tasksCountDec(event.target.parentNode),a.setToStorage(this.currentManager),t.remove()})),r.appendChild(d),r.appendChild(l),r.appendChild(u),r.appendChild(c),this.dom.div=r};i.prototype.getElement=function(){return this.dom.div},i.prototype.getPriority=function(t,e){"High"===t?(e.textContent=t,e.classList.add("priorityClassHigth")):"Medium"===t?(e.textContent=t,e.classList.add("priorityClassMedium")):(e.textContent=t,e.classList.add("priorityClassLow"))};var s=i,r=function(t){this.name=t,this.list=[]};r.prototype.addTask=function(t,e,n){var a=new s(t,e,n);return this.list.push(a),a};var d=r;n(0);var l=function(){this.managers=[],this.currentManager=null,this.list={counter:0},this.prepare(),this.addNewList(),this.drawButton(),this.setFirstList(),this.getFromStorage(this.managers[0]),this.getStorageButtons()};l.prototype.prepare=function(){var t=o.find(document,".main__block");o.find(document,".main__block_show");this.lists=o.make("div",["lists"]),this.lists.span=o.make("span"),this.lists.TodayButton=o.make("button",["manager","list"],{textContent:"Cегодня"}),this.lists.TodayButton.dataset.id="today",this.addListButton=o.make("button",["listAdd"],{textContent:"+"}),this.addTasksButton=o.make("button",["button"],{textContent:"Add Task"}),this.addListButton.dataset.toggle="modal",this.addListButton.dataset.target="#myModal",this.addBlockInput=o.make("input",["input"]),this.addBlockInput.placeholder="Add Task...",this.addBlockSelect=o.make("select",["priority"]),this.addBlockOptionHigth=o.make("option",[],{textContent:"High"}),this.addBlockOptionMedium=o.make("option",[],{textContent:"Medium"}),this.addBlockOptionLow=o.make("option",[],{textContent:"Low"}),this.taskList=o.make("div",["taskList"]),this.taskList.ul=o.make("ul",["ulClass"]),this.taskList.Counter=o.make("span",["taskCount"],{textContent:"Tasks: ".concat(this.list.counter)}),o.appendTo(this.addBlockSelect,this.addBlockOptionHigth),o.appendTo(this.addBlockSelect,this.addBlockOptionMedium),o.appendTo(this.addBlockSelect,this.addBlockOptionLow),o.appendTo(this.taskList,this.addBlockInput),o.appendTo(this.taskList,this.addBlockSelect),o.appendTo(this.taskList,this.addTasksButton),o.appendTo(this.taskList,this.taskList.ul),o.appendTo(this.lists,this.lists.TodayButton),o.appendTo(this.lists,this.addListButton),o.appendTo(t,this.lists),o.appendTo(t,this.taskList),o.appendTo(t,this.taskList.Counter);var e=JSON.parse(localStorage.getItem("counter"));null!=e&&(this.taskList.Counter.style.display="block",this.taskList.Counter.textContent="Tasks: ".concat(e))},l.prototype.addNewList=function(){var t=this;o.find(document,".listAdd").addEventListener("click",(function(){var e=o.find(document,".newListInput");o.make("button",["listAdd"],{textContent:"+"});function n(){var n=e.value;if(""!==n){var a=o.make("button",["manager","list"],{textContent:n});a.dataset.id=n,o.appendTo(t.lists,a),o.appendTo(t.lists,t.addListButton);var i=new d(n);t.managers.push(i),t.bindButtonEvent(a),e.value="",t.SetStorageButtons(n)}}document.querySelector(".newListInput").addEventListener("keydown",(function(t){13===t.keyCode&&(n(),e.value="")})),o.find(document,"#addList").addEventListener("click",n)}))},l.prototype.drawButton=function(){var t=o.find(document,".button");this.taskList.ul=o.find(document,".ulClass");for(var e=this,n=o.findAll(document,".manager"),a=0;a<n.length;a++){var i=n[a],s=new d(i.dataset.id);this.managers.push(s),this.bindButtonEvent(i)}t.addEventListener("click",(function(t){var n=o.find(document,".priority").value;if(e.tasksCountInc(),e.taskList.Counter.style.display="block",e.inputValue=o.find(document,".input"),""!=e.inputValue.value){var a=e.inputValue.value,i=e.currentManager.addTask(a,n,e);e.AddToUl(i.getElement()),e.inputValue.value="",e.inputValue.focus(),e.setToStorage(e.currentManager)}}))},l.prototype.tasksCountInc=function(){var t=JSON.parse(localStorage.getItem("counter"));t++,localStorage.setItem("counter",JSON.stringify(t)),this.taskList.Counter.textContent="Tasks: ".concat(t)},l.prototype.tasksCountDec=function(t){for(var e=o.find(t,".listText").textContent,n=0;n<this.currentManager.list.length;n++)this.currentManager.list[n].name===e&&(this.currentManager.list.splice(n,1),this.setToStorage(this.currentManager));var a=JSON.parse(localStorage.getItem("counter"));a--,localStorage.setItem("counter",JSON.stringify(a)),this.taskList.Counter.textContent="Tasks: ".concat(a)},l.prototype.setFirstList=function(){this.currentManager=this.managers[0]},l.prototype.bindButtonEvent=function(t){var e=this;t.addEventListener("click",(function(t){var n=t.target.dataset.id;e.taskList.ul.innerHTML="";for(var a=0;a<e.managers.length;a++)e.managers[a].name===n&&(e.currentList=n,e.currentManager=e.managers[a]);e.getFromStorage(e.currentManager)}))},l.prototype.setToStorage=function(t){if(null!=t){for(var e=[],n=0;n<t.list.length;n++){var a={text:t.list[n].name,priority:t.list[n].priority};e.push(a)}localStorage.setItem(t.name,JSON.stringify(e))}},l.prototype.getFromStorage=function(t){var e=JSON.parse(localStorage.getItem(t.name)),n=[],a={name:t.name,list:n};if(null!=e)for(var o=0;o<e.length;o++){var i=this.currentManager.addTask(e[o].text,e[o].priority,this);n.push(i)}this.fillByManagerList(a)},l.prototype.SetStorageButtons=function(t){var e=[],n=JSON.parse(localStorage.getItem("buttonsList"));if(null!=n)for(var a=0;a<n.length;a++)e.push(n[a]);e.push(t),localStorage.setItem("buttonsList",JSON.stringify(e))},l.prototype.getStorageButtons=function(){var t=JSON.parse(localStorage.getItem("buttonsList"));if(null!=t)for(var e=0;e<t.length;e++){var n=o.make("button",["manager","list"],{textContent:t[e]});n.dataset.id=t[e],o.appendTo(this.lists,n),o.appendTo(this.lists,this.addListButton);var a=new d(t[e]);this.managers.push(a),this.bindButtonEvent(n)}},l.prototype.fillByManagerList=function(t){for(var e=0;e<t.list.length;e++)this.AddToUl(t.list[e].getElement())},l.prototype.AddToUl=function(t){o.appendTo(this.taskList.ul,t)};e.default=l}]).default}));