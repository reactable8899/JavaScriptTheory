!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TodoList=e():t.TodoList=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(o,s,function(e){return t[e]}.bind(null,s));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);const o=function(){};o.prototype.make=function(t,e=[],n={}){const o=document.createElement(t);for(let t=0;t<e.length;t++){const n=e[t];o.classList.add(n)}for(let t in n)o[t]=n[t];return o},o.prototype.find=function(t,e){return t.querySelector(e)},o.prototype.findAll=function(t,e){return t.querySelectorAll(e)},o.prototype.appendTo=function(t,e){t.append(e)};var s=new o;const i=function(t,e,n){this.name=t,this.priority=e,this.app=n,this.dom={div:null};let o=0;const a=s.make("div",["list__task"]),l=s.make("span");l.classList.add=i.prototype.getPriority(e,l);const r=s.make("span",["listText"],{textContent:t}),d=s.make("button",["list__button"],{textContent:"..."}),u=s.make("button",["deleteSpan"],{textContent:"Удалить"});d.addEventListener("click",(function(t){0===o?(a.appendChild(u),u.classList.add("changeDisplayBlock"),u.classList.remove("changeDisplayNone"),o++):(u.classList.add("changeDisplayNone"),u.classList.remove("changeDisplayBlock"),o--)})),u.addEventListener("click",(function(){const t=event.target.parentNode;n.tasksCountDec(event.target.parentNode),n.setToLocal(this.currentManager),t.remove()})),a.appendChild(l),a.appendChild(r),a.appendChild(d),this.dom.div=a};i.prototype.getElement=function(){return this.dom.div},i.prototype.getPriority=function(t,e){"High"===t?(e.textContent=t,e.classList.add("priorityClassHigth")):"Medium"===t?(e.textContent=t,e.classList.add("priorityClassMedium")):(e.textContent=t,e.classList.add("priorityClassLow"))};var a=i;const l=function(t){this.name=t,this.list=[]};l.prototype.addTask=function(t,e,n){const o=new a(t,e,n);return this.list.push(o),o};var r=l;const d=function(){this.managers=[],this.currentManager=null,this.list={counter:0},this.prepare(),this.listAdd(),this.drawButton(),this.showAddBlock(),this.firstList(),this.getfromLocal(this.managers[0]),this.getLocalButtons()};d.prototype.showAddBlock=function(){let t=0;const e=s.find(document,".main__block_show"),n=s.find(document,".lists");s.find(document,".addButton").addEventListener("click",(function(){0===t?(e.style.display="block",n.style.display="block",t++):(e.style.display="none",n.style.display="none",t--)}))},d.prototype.prepare=function(){const t=s.find(document,".main__block"),e=s.find(document,".main__block_show");this.lists=s.make("div",["lists"]),this.lists.span=s.make("span"),this.lists.TodayButton=s.make("button",["manager","list"],{textContent:"Cегодня"}),this.lists.TodayButton.dataset.id="today",this.addListButton=s.make("button",["listAdd"],{textContent:"+"}),this.addListButton.dataset.toggle="modal",this.addListButton.dataset.target="#myModal",this.addBlockInput=s.make("input",["input"]),this.addBlockInput.placeholder="Add Task",this.addBlockSelect=s.make("select",["priority"]),this.addBlockOptionHigth=s.make("option",[],{textContent:"High"}),this.addBlockOptionMedium=s.make("option",[],{textContent:"Medium"}),this.addBlockOptionLow=s.make("option",[],{textContent:"Low"}),this.taskList=s.make("div",["taskList"]),this.taskList.ul=s.make("ul",["ulClass"]),this.taskList.Counter=s.make("span",["taskCount"],{textContent:"Tasks: "+this.list.counter}),s.appendTo(this.addBlockSelect,this.addBlockOptionHigth),s.appendTo(this.addBlockSelect,this.addBlockOptionMedium),s.appendTo(this.addBlockSelect,this.addBlockOptionLow),s.appendTo(this.taskList,this.taskList.ul),e.prepend(this.addBlockSelect),e.prepend(this.addBlockInput),s.appendTo(this.lists,this.lists.TodayButton),s.appendTo(this.lists,this.addListButton),s.appendTo(t,this.lists),s.appendTo(t,this.taskList),s.appendTo(t,this.taskList.Counter)},d.prototype.listAdd=function(){const t=this;s.find(document,".listAdd").addEventListener("click",(function(){const e=s.find(document,".newListInput");s.make("button",["listAdd"],{textContent:"+"});document.querySelector(".newListInput").addEventListener("keydown",(function(t){13===t.keyCode&&(n(),e.value="")}));function n(){const n=e.value;if(""===n)return;const o=s.make("button",["manager","list"],{textContent:n});o.dataset.id=n,s.appendTo(t.lists,o),s.appendTo(t.lists,t.addListButton);const i=new r(n);t.managers.push(i),t.bindButtonEvent(o),e.value="",t.SetLocalButtons(n)}s.find(document,"#addList").addEventListener("click",n)}))},d.prototype.drawButton=function(){const t=s.find(document,".button");this.taskList.ul=s.find(document,".ulClass");const e=this,n=s.findAll(document,".manager");for(let t=0;t<n.length;t++){const e=n[t],o=new r(e.dataset.id);this.managers.push(o),this.bindButtonEvent(e)}t.addEventListener("click",(function(t){const n=s.find(document,".priority").value;if(e.tasksCountInc(),e.taskList.Counter.style.display="block",e.inputValue=s.find(document,".input"),""!=e.inputValue.value){const t=e.inputValue.value,o=e.currentManager.addTask(t,n,e);e.AddToUl(o.getElement()),e.inputValue.value="",e.inputValue.focus(),e.setToLocal(e.currentManager)}}))},d.prototype.tasksCountInc=function(){this.list.counter++,this.taskList.Counter.textContent="Tasks: "+this.list.counter},d.prototype.tasksCountDec=function(t){const e=s.find(t,".listText").textContent;for(let t=0;t<this.currentManager.list.length;t++)this.currentManager.list[t].name===e&&(this.currentManager.list.splice(t,1),this.setToLocal(this.currentManager));this.list.counter--,this.taskList.Counter.textContent="Tasks: "+this.list.counter},d.prototype.firstList=function(){this.currentManager=this.managers[0]},d.prototype.bindButtonEvent=function(t){const e=this;t.addEventListener("click",(function(t){const n=t.target.dataset.id;e.taskList.ul.innerHTML="";for(let t=0;t<e.managers.length;t++)e.managers[t].name===n&&(e.currentList=n,e.currentManager=e.managers[t]);e.getfromLocal(e.currentManager)}))},d.prototype.setToLocal=function(t){if(null!=t){const e=[];for(let n=0;n<t.list.length;n++){const o={text:t.list[n].name,priority:t.list[n].priority};e.push(o)}localStorage.setItem(t.name,JSON.stringify(e))}},d.prototype.getfromLocal=function(t){const e=JSON.parse(localStorage.getItem(t.name)),n=[],o={name:t.name,list:n};if(null!=e)for(let t=0;t<e.length;t++){const o=this.currentManager.addTask(e[t].text,e[t].priority,this);n.push(o)}this.fillByManagerList(o)},d.prototype.SetLocalButtons=function(t){const e=[],n=JSON.parse(localStorage.getItem("buttonsList"));if(null!=n){console.log("as");for(let t=0;t<n.length;t++)e.push(n[t])}e.push(t),localStorage.setItem("buttonsList",JSON.stringify(e))},d.prototype.getLocalButtons=function(){const t=JSON.parse(localStorage.getItem("buttonsList"));if(null!=t)for(let e=0;e<t.length;e++){const n=s.make("button",["manager","list"],{textContent:t[e]});n.dataset.id=t[e],s.appendTo(this.lists,n),s.appendTo(this.lists,this.addListButton);const o=new r(t[e]);this.managers.push(o),this.bindButtonEvent(n)}},d.prototype.fillByManagerList=function(t){for(let e=0;e<t.list.length;e++)this.AddToUl(t.list[e].getElement())},d.prototype.AddToUl=function(t){s.appendTo(this.taskList.ul,t)};e.default=d}]).default}));